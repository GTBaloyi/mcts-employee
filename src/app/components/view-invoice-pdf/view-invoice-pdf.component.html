<div class="page-header">
    <button type="button" class="btn btn-gradient-primary btn-rounded btn-icon" routerLink="/invoice" >
        <i class="mdi mdi-backspace icon-md"></i>
    </button>

    <h3 class="page-title">
    <span class="page-title-icon bg-gradient-primary text-white mr-2">
      <i class="mdi mdi-file-pdf"></i>
    </span>
        View Invoice
    </h3>
</div>

<div class="card">
    <div class="invoice">
        <div class="toolbar hidden-print">
            <div class="text-right">
                <button type="button" class="btn btn-gradient-primary" (click)="convertToPDF()" value="Convert">
                    <i class="mdi mdi-download d-block mb-1"></i>
                    Download
                </button>
                <button type="button" class="btn btn-gradient-success">
                    <i class="mdi mdi-credit-card d-block mb-1"></i>
                    Payment
                </button>
            </div>
            <hr>
        </div>
        <div class="invoice overflow-auto" #pdfTable id="pdfTable">
            <div style="min-width: 600px">
                <header>
                    <div class="row">
                        <div class="col">
                            <img src="../../../assets/quotationLogo.png" data-holder-rendered="true" />
                        </div>
                        <div class="col company-details">
                            <h3 class="name">
                                Metal Casting Technology Station (MCTS)
                            </h3>
                            <div>University of Johannesburg 101 John Orr Building Beit Street Doornfontein
                                Campus P.O. Box 17001 Doornfontein 2028 VAT No. 4900127681, Johannesburg,
                                2094 Gauteng, South Africa</div>
                            <div>Phone: (+27) 11 559 6290</div>
                            <div>Email: commuczz@communityengagement.co.za</div>
                        </div>
                    </div>
                </header>
                <main>
                    <div class="row contacts">
                        <div class="col invoice-to">
                            <div class="text-gray-light">INVOICE TO:</div>
                            <h2 class="to">{{userInformation.companyName}}</h2>
                            <div class="address">VAT Number: {{invoice.vat}}</div>
                            <div class="address">Bill address: {{invoice.bill_address}}</div>
                            <div class="email"><a href="{{userInformation.contactEmail}}">Email address: {{userInformation.contactEmail}}</a></div>
                        </div>
                        <div class="col invoice-details">
                            <h1 class="invoice-id">INVOICE {{invoice.reference}}</h1>
                            <div class="date">Date of Invoice: {{invoice.invoice_date  | date: 'yyyy-MM-dd'}}</div>
                            <div class="date">Due Date: {{invoice.date_due  | date: 'yyyy-MM-dd'}}</div>
                        </div>
                    </div>
                    <table border="0" cellspacing="0" cellpadding="0">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th class="text-left">PRODUCT DESCRIPTION</th>
                            <th class="text-right">QUANTITY</th>
                            <th class="text-right">UNIT PRICE</th>
                            <th class="text-right">TOTAL</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let product of invoice.items; let i = index">
                            <td class="no">{{i}}</td>
                            <td class="text-left"><h3>{{product.focusArea}}</h3>{{product.item}}</td>
                            <td class="unit">{{product.quantity}}</td>
                            <td class="qty">{{product.unit_Price}}</td>
                            <td class="total">{{product.total}}</td>
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="2"></td>
                            <td colspan="2">SUBTOTAL</td>
                            <td>R {{invoice.subtotal}}</td>
                        </tr>
                        <tr>
                            <td colspan="2"></td>
                            <td colspan="2">VAT {{invoice.vat_percentage * 100}}%</td>
                            <td>R{{invoice.vat}}</td>
                        </tr>
                        <tr>
                            <td colspan="2"></td>
                            <td colspan="2">GRAND TOTAL</td>
                            <td>R{{invoice.grand_totoal}}</td>
                        </tr>
                        <tr style="background: #023185; color: #FFF">
                            <td colspan="2"></td>
                            <td colspan="2">Amount Due</td>
                            <td>R{{invoice.amount_due}}</td>
                        </tr>
                        </tfoot>
                    </table>
                    <div class="notices">
                        <div>Terms & Conditions:</div>
                        <div class="notice">
                            All quotations, indication of costs and financial commitments given or made by the Seller are based on the assumption of
                            the validity of the information provided is fully accurate and correct in all circumstances. The Seller maintains the right at
                            any stage to re-negotiate any contract, cost agreement or any other relevant commitment should any information provided
                            by the Purchaser fail to be fully valid accurate and correct.</div>
                    </div>
                </main>
                <footer>
                    Invoice was created on a computer and is valid without the signature and seal.
                </footer>
            </div>
            <div></div>
        </div>
    </div>
</div>

<div [style.display]="showModal ? 'block' : 'none'" class="modal" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content"  style="background-color: #ffffff; -webkit-box-shadow: inset 0 0 10px #23275b;box-shadow: inset 0 0 10px #23275b;">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel" style="font-weight: bolder" >Make Payment</h4>
            </div>
            <div class="modal-body">
                <!--<form class="pt-3" #quoteReasonForm="ngForm" (ngSubmit)="quoteReasonForm.form.valid && rejectQuotation(quotation)">

                    <div class="form-group" >
                        <input style="border: solid  #23275b 1px" class="form-control form-control-lg" type="text" placeholder="Reason for rejection"
                               [(ngModel)]="quotation.reason"
                               name="reason"
                               #comment="ngModel"
                               [ngClass]="{ 'is-invalid': quoteReasonForm.submitted && comment.invalid }"
                               required>
                        <div *ngIf="quoteReasonForm.submitted && comment.invalid" class="invalid-feedback">
                            <div *ngIf="comment.errors.required">Reason is required</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-gradient-danger" data-dismiss="modal" (click) = "hide()">Cancel</button>
                        <button type="submit" class="btn btn-gradient-primary" data-dismiss="modal">Submit</button>
                    </div>
                </form>-->
            </div>
        </div>
    </div>
</div>
<div *ngIf="isLoading | async" class="overlay">
    <div class="spinner">
        <img class="loader" src="../../../assets/wheel.gif">
    </div>
</div>

